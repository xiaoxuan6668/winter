\doxysection{winter\+::Fiber类 参考}
\label{classwinter_1_1Fiber}\index{winter::Fiber@{winter::Fiber}}


协程类  




{\ttfamily \#include $<$fiber.\+h$>$}



类 winter\+::Fiber 继承关系图\+:
% FIG 0


winter\+::Fiber 的协作图\+:
% FIG 1
\doxysubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classwinter_1_1Fiber_ae249fef4926e7bb206f86587fd58583d}} 
enum \textbf{ State} \{ \newline
{\bfseries INIT}
, {\bfseries HOLD}
, {\bfseries EXEC}
, {\bfseries TERM}
, \newline
{\bfseries READY}
, {\bfseries EXCEPT}
 \}
\begin{DoxyCompactList}\small\item\em 协程状态 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_adec6a43dbb9323993f391d379f2ce397}} 
typedef std\+::shared\+\_\+ptr$<$ \textbf{ Fiber} $>$ {\bfseries ptr}
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\textbf{ Fiber} (std\+::function$<$ void()$>$ cb, size\+\_\+t stacksize=0, bool use\+\_\+caller=false)
\begin{DoxyCompactList}\small\item\em 构造函数 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_aa2b0df66e770219fc950ab61ee2134e8}} 
\textbf{ $\sim$\+Fiber} ()
\begin{DoxyCompactList}\small\item\em 析构函数 \end{DoxyCompactList}\item 
void \textbf{ reset} (std\+::function$<$ void()$>$ cb)
\begin{DoxyCompactList}\small\item\em 重置协程执行函数,并设置状态 \end{DoxyCompactList}\item 
void \textbf{ swap\+In} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到运行状态 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_aea7a60470c6a98639aef4d2a21dc16f4}} 
void \textbf{ swap\+Out} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到后台 \end{DoxyCompactList}\item 
void \textbf{ call} ()
\begin{DoxyCompactList}\small\item\em 将当前线程切换到执行状态 \end{DoxyCompactList}\item 
void \textbf{ back} ()
\begin{DoxyCompactList}\small\item\em 将当前线程切换到后台 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_a292ad74db0b556f5fe9357821774949f}} 
uint64\+\_\+t \textbf{ get\+Id} () const
\begin{DoxyCompactList}\small\item\em 返回协程id \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef}} 
\textbf{ State} \textbf{ get\+State} () const
\begin{DoxyCompactList}\small\item\em 返回协程状态 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static void \textbf{ Set\+This} (\textbf{ Fiber} $\ast$f)
\begin{DoxyCompactList}\small\item\em 设置当前线程的运行协程 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_aedade8d2adfee1f538c10bf35d82d361}} 
static Fiber\+::ptr \textbf{ Get\+This} ()
\begin{DoxyCompactList}\small\item\em 返回当前所在的协程 \end{DoxyCompactList}\item 
static void \textbf{ Yield\+To\+Ready} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到后台,并设置为\+READY状态 \end{DoxyCompactList}\item 
static void \textbf{ Yield\+To\+Hold} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到后台,并设置为\+HOLD状态 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_a40f76885d9cae28713b365eeee209d73}} 
static uint64\+\_\+t \textbf{ Total\+Fibers} ()
\begin{DoxyCompactList}\small\item\em 返回当前协程的总数量 \end{DoxyCompactList}\item 
static void \textbf{ Main\+Func} ()
\begin{DoxyCompactList}\small\item\em 协程执行函数 \end{DoxyCompactList}\item 
static void \textbf{ Caller\+Main\+Func} ()
\begin{DoxyCompactList}\small\item\em 协程执行函数 \end{DoxyCompactList}\item 
\mbox{\label{classwinter_1_1Fiber_a355386a95d084c8333ef47602ca80bff}} 
static uint64\+\_\+t \textbf{ Get\+Fiber\+Id} ()
\begin{DoxyCompactList}\small\item\em 获取当前协程的id \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{友元}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classwinter_1_1Fiber_afb88c77ea5daaefa6c8fa6bc5b9aa5c1}} 
class {\bfseries Scheduler}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
协程类 

\doxysubsection{构造及析构函数说明}
\mbox{\label{classwinter_1_1Fiber_ac8aadaaa2e505517c0acd3a46acb595d}} 
\index{winter::Fiber@{winter::Fiber}!Fiber@{Fiber}}
\index{Fiber@{Fiber}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{Fiber()}
{\footnotesize\ttfamily winter\+::\+Fiber\+::\+Fiber (\begin{DoxyParamCaption}\item[{std\+::function$<$ void()$>$}]{cb,  }\item[{size\+\_\+t}]{stacksize = {\ttfamily 0},  }\item[{bool}]{use\+\_\+caller = {\ttfamily false} }\end{DoxyParamCaption})}



构造函数 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em cb} & 协程执行的函数 \\
\hline
\mbox{\texttt{ in}}  & {\em stacksize} & 协程栈大小 \\
\hline
\mbox{\texttt{ in}}  & {\em use\+\_\+caller} & 是否在\+Main\+Fiber上调度 \\
\hline
\end{DoxyParams}


\doxysubsection{成员函数说明}
\mbox{\label{classwinter_1_1Fiber_a4c5b469dc2c4fd847854c99b6dfe7711}} 
\index{winter::Fiber@{winter::Fiber}!back@{back}}
\index{back@{back}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{back()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::back (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



将当前线程切换到后台 

\begin{DoxyPrecond}{前置条件}
执行的为该协程 
\end{DoxyPrecond}
\begin{DoxyPostcond}{后置条件}
返回到线程的主协程 
\end{DoxyPostcond}
函数调用图\+:
% FIG 2
\mbox{\label{classwinter_1_1Fiber_a8337a04ff19f91bdd46f17789490abc3}} 
\index{winter::Fiber@{winter::Fiber}!call@{call}}
\index{call@{call}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{call()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::call (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



将当前线程切换到执行状态 

\begin{DoxyPrecond}{前置条件}
执行的为当前线程的主协程 
\end{DoxyPrecond}
函数调用图\+:
% FIG 3
\mbox{\label{classwinter_1_1Fiber_af7b3a73e11c8e997668f4c848db264a7}} 
\index{winter::Fiber@{winter::Fiber}!CallerMainFunc@{CallerMainFunc}}
\index{CallerMainFunc@{CallerMainFunc}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{CallerMainFunc()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::\+Caller\+Main\+Func (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



协程执行函数 

\begin{DoxyPostcond}{后置条件}
执行完成返回到线程调度协程 
\end{DoxyPostcond}
函数调用图\+:
% FIG 4
\mbox{\label{classwinter_1_1Fiber_a1e87940a7cc24bc1e5f8f7f3b9a880dd}} 
\index{winter::Fiber@{winter::Fiber}!MainFunc@{MainFunc}}
\index{MainFunc@{MainFunc}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{MainFunc()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::\+Main\+Func (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



协程执行函数 

\begin{DoxyPostcond}{后置条件}
执行完成返回到线程主协程 
\end{DoxyPostcond}
函数调用图\+:
% FIG 5
\mbox{\label{classwinter_1_1Fiber_afa261911e1f4323946ec136546b1c319}} 
\index{winter::Fiber@{winter::Fiber}!reset@{reset}}
\index{reset@{reset}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{reset()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::reset (\begin{DoxyParamCaption}\item[{std\+::function$<$ void()$>$}]{cb }\end{DoxyParamCaption})}



重置协程执行函数,并设置状态 

\begin{DoxyPrecond}{前置条件}
\doxyref{get\+State()}{p.}{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef} 为 INIT, TERM, EXCEPT 
\end{DoxyPrecond}
\begin{DoxyPostcond}{后置条件}
\doxyref{get\+State()}{p.}{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef} = INIT 
\end{DoxyPostcond}
\mbox{\label{classwinter_1_1Fiber_ad58ca3bef5dd8f3605436684bff8cd6f}} 
\index{winter::Fiber@{winter::Fiber}!SetThis@{SetThis}}
\index{SetThis@{SetThis}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{SetThis()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::\+Set\+This (\begin{DoxyParamCaption}\item[{\textbf{ Fiber} $\ast$}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



设置当前线程的运行协程 


\begin{DoxyParams}[1]{参数}
\mbox{\texttt{ in}}  & {\em f} & 运行协程 \\
\hline
\end{DoxyParams}
\mbox{\label{classwinter_1_1Fiber_a59f74d23341483264b7e449a9d5b69c0}} 
\index{winter::Fiber@{winter::Fiber}!swapIn@{swapIn}}
\index{swapIn@{swapIn}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{swapIn()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::swap\+In (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



将当前协程切换到运行状态 

\begin{DoxyPrecond}{前置条件}
\doxyref{get\+State()}{p.}{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef} != EXEC 
\end{DoxyPrecond}
\begin{DoxyPostcond}{后置条件}
\doxyref{get\+State()}{p.}{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef} = EXEC 
\end{DoxyPostcond}
函数调用图\+:
% FIG 6
\mbox{\label{classwinter_1_1Fiber_a8586500f81bbfb1d95af07e4e01a514f}} 
\index{winter::Fiber@{winter::Fiber}!YieldToHold@{YieldToHold}}
\index{YieldToHold@{YieldToHold}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{YieldToHold()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::\+Yield\+To\+Hold (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



将当前协程切换到后台,并设置为\+HOLD状态 

\begin{DoxyPostcond}{后置条件}
\doxyref{get\+State()}{p.}{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef} = HOLD 
\end{DoxyPostcond}
函数调用图\+:
% FIG 7
\mbox{\label{classwinter_1_1Fiber_a70785618d8396ae44c58144c888feee2}} 
\index{winter::Fiber@{winter::Fiber}!YieldToReady@{YieldToReady}}
\index{YieldToReady@{YieldToReady}!winter::Fiber@{winter::Fiber}}
\doxysubsubsection{YieldToReady()}
{\footnotesize\ttfamily void winter\+::\+Fiber\+::\+Yield\+To\+Ready (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



将当前协程切换到后台,并设置为\+READY状态 

\begin{DoxyPostcond}{后置条件}
\doxyref{get\+State()}{p.}{classwinter_1_1Fiber_acf32500670a0208aede72b652546a9ef} = READY 
\end{DoxyPostcond}
函数调用图\+:
% FIG 8


该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
\textbf{ fiber.\+h}\item 
fiber.\+cc\end{DoxyCompactItemize}
